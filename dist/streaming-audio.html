<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Technology, Audio and other Geekery</title>
<meta name="description" content="">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chinpen.net/blog/img/site-logo.png">
<meta name="twitter:title" content="Technology, Audio and other Geekery">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@ntt">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Technology, Audio and other Geekery">
<meta property="og:description" content="">
<meta property="og:url" content="https://chinpen.net/blog/streaming-audio.html">
<meta property="og:site_name" content="Technology, Audio and other Geekery">





<link rel="canonical" href="https://chinpen.net/blog/streaming-audio.html">
<link href="https://chinpen.net/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Technology, Audio and other Geekery Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/styles/index.css">
<!-- Webfonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Volkhov:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" href="https://chinpen.net/blog/favicon.ico">
<link rel="shortcut icon" href="https://chinpen.net/blog/favicon.png">

</head>

<body id="post">

<div class="navbar bg-base-100 shadow-sm">
	<div class="navbar-start">
		<a class="text-xl">chinpen.net</a>
	</div>
	<div class="navbar-center hidden lg:flex">
		<ul class="menu menu-horizontal px-1">
			
			<li class="text-xl">
				
				<a href="https://chinpen.net">Home</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/blog/">Blog</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/about/">About</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/feed.xml">Feed</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/search">Search</a>
				
			</li>
			
		</ul>
	</div>
</div>

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title"></h1>
        
      </header>
      <footer class="entry-meta">
        <picture><source type="image/webp" srcset="/.11ty/image/?src=https%3A%2F%2Fchinpen.net%2Fblog%2Fimages%2Fchinpen.jpg&width=180&format=webp&via=transform 180w"><img src="/.11ty/image/?src=https%3A%2F%2Fchinpen.net%2Fblog%2Fimages%2Fchinpen.jpg&width=180&format=jpeg&via=transform" alt="Chinmay photo" class="author-photo" width="180" height="180"></picture>
        <span class="author vcard">By <span class="fn"><a href="https://chinpen.net/blog/about/" title="About Chinmay">Chinmay</a></span></span>
        <span class="entry-date date published"><time datetime="2013-11-03T08:00:00+08:00"><i class="icon-calendar-empty"></i> November 03, 2013</time></span>
        
        
        <span><a href="https://chinpen.net/blog/streaming-audio.html" rel="bookmark" title=""><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <p>For my <a href="http://live.webuild.sg">new (it's almost 3 months old already) podcast</a> we had an idea of streaming the recording live. Also I had decided to leave Skype for <a href="http://mumble.sourceforge.net/">Mumble</a>. Skype was getting too unreliable and Mumble supported <a href="http://blog.mumble.info/for-the-record/">separate channel recording</a> for each connected client, which would make post processing much simpler.</p>
<p>So I setup a spare box (Pentium(R) Dual-Core E6300, 4GB) to run <a href="https://www.archlinux.org/">Archlinux</a> (which turned out to be kind of a bad idea in the end). I am lucky to get a pseudo-static IP from my ISP but I got <a href="https://wiki.archlinux.org/index.php/Dynamic_DNS">Dynamic DNS </a>setup using <a href="http://sourceforge.net/p/ddclient/wiki/Home/">ddclient</a> just incase.</p>
<p>![server](../img/2013/11/server.jpg)</p>
<p>Next was to run a <a href="http://mumble.sourceforge.net/Running_Murmur">Mumble server (Murmur)</a>. It's pretty easy to setup and usually has been downstreamed to the most distro repos. I setup a single &quot;room&quot; on the server and ensured the server was password protected. With that I was able to connect using the Mumble clients inside and outside my network and have a proper podcast recording at high quality. With some port forwarding on my router I had the server accessible from outside. <a href="https://wiki.archlinux.org/index.php/iptables">iptables</a> were of course necessary to keep the naughty people away.</p>
<p><a href="img/2013/11/murmur.png"><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Fmurmur.png&width=669&format=webp&via=transform 669w"><img src="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Fmurmur.png&width=669&format=jpeg&via=transform" alt="murmur" width="669" height="452"></picture></a></p>
<p><a href="http://icecast.org">Icecast</a> was the obvious option for the streaming bit. It's pretty easy to setup (again look in your repos) and has a ton of features to control the audio quality and other server settings. Again port forwarding was needed for the Icecast server as well.</p>
<p><a href="img/2013/11/archbox.png"><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Farchbox.png&width=669&format=webp&via=transform 669w"><img src="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Farchbox.png&width=669&format=jpeg&via=transform" alt="icecase" width="669" height="453"></picture></a></p>
<p>The only interesting issue here was streaming music. We wanted to stream Creative Commons Music before and after the live recording, so I set up <a href="http://www.icecast.org/ices.php">ices0 source client</a> to stream music from <a href="http://ccmixter.org">CCMixter</a>. But thanks to <a href="https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats">FF on OSX not supporting mp3 </a>(it's supposed to change soon), I had to also run an <a href="http://www.icecast.org/ices.php">ices2</a> instance streaming ogg music for everyone on FF.</p>
<p>So next, streaming the actual Mumble conversation out. How do I stream the audio out? Mumble or Murmur don't really have an elegant way to pipe out the audio. But I found a way to use <a href="http://www.freedesktop.org/wiki/Software/PulseAudio/">Pulse Audio</a> to basically &quot;pipe&quot; audio from a Mumble client using an Icecast source client called <a href="https://code.google.com/p/darkice/">DarkIce</a>.</p>
<p>The couple of hoops one has to be jump through to get this work. Firstly we need a <a href="http://mumble.sourceforge.net/">Mumble client</a> running on the same server as the Icecast server. Running a Mumble client requires a GUI and hence I had to install <a href="https://wiki.archlinux.org/index.php/GNOME">GNOME</a> on my headless Arch install (sigh!). Using the GUI I setup the Mumble client to automatically connect to the Mumble Server. Now I could just launch the Mumble client from command line.</p>
<p><a href="img/2013/11/mumble2.png"><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Fmumble2.png&width=1024&format=webp&via=transform 1024w"><img src="/.11ty/image/?src=src%2Fimg%2F2013%2F11%2Fmumble2.png&width=1024&format=jpeg&via=transform" alt="mumble2" width="1024" height="768"></picture></a></p>
<p>Next was getting the DarkIce to work. I got a lot of help from <a href="http://www.skyehaven.net/blog/2011/03/14/mumble-icecast/">this post on doing something similar</a>. DarkIce can pipe any Pulse Audio Stream to an IceCast server. So I created a dummy(null) Pulse Audio Stream which can be set as the audio output (System : Pulse Audio &amp; Device : Null Output) in the Mumble client and on the other end used to feed DarkIce using the &quot;.monitor&quot; functionality of Pulse Audio Streams. The DarkIce config in the repo has the relevant config setup.</p>
<p>![mumble](../img/2013/11/mumble1.png)</p>
<p>With that setup in DarkIce and in the Mumble Client, we had the audio from the Mumble conversation happily being streamed out over Icecast. DarkIce also supported transcoding and streaming multiple streams (mp3 and ogg) to the Icecast server (Yay!).</p>
<p>I was cheap and lazy and ran all the servers on a single machine, but you can of course separate them on different boxes/VMs. This was the final setup..</p>
<p><a href="img/2013/10/Streaming-Setup-1.jpg"><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2F2013%2F10%2FStreaming-Setup-1.jpg&width=960&format=webp&via=transform 960w"><img src="/.11ty/image/?src=src%2Fimg%2F2013%2F10%2FStreaming-Setup-1.jpg&width=960&format=jpeg&via=transform" alt="Streaming Setup" width="960" height="720"></picture></a></p>
<p>With everything setup, I could enable/disable radio and Mumble streaming from command line. I had to do a final hack to allow the Arch to run GNOME even when no monitor was attached. I could do a VNC virtual display, but I did a <a href="http://blog.zorinaq.com/?e=11">more hardware hack</a> by making a &quot;Fake Display&quot; using some resistors on a VGA connector. This way I could connect a monitor anytime I wanted.</p>
<p>![monitor](../img/2013/11/monitor.jpg)</p>
<p>I have uploaded all <a href="https://github.com/notthetup/webuildliveserver">my config scripts to a github repo </a>here. Feel free to ask any questions</p>
<p>And you can listen to radio streaming (when it's running) from the server here.</p>
<audio autobuffer="" autoloop="" loop="" controls="">
	<source src="http://listen.webuild.sg:8000/live">
	<source src="http://listen.webuild.sg:8000/radio">
</audio>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<footer class="footer footer-center p-10 m-">
	<nav>
		<div class="bg-base-content/10 mx-1 mt-10 mb-5 w-full h-[var(--border)]"></div>
		<h5 class="font-[volkhov]"><em>&copy; 2025 Chinmay. Powered by <a href="https://www.eleventy.dev/" target="_blank">Eleventy</a></em>.
		<div class="grid grid-flow-col justify-center gap-4">
			<a href="https://twitter.com/ntt" title="Chinmay on Twitter" target="_blank">
				<picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2Fsocial%2Ftwitter.png&width=512&format=webp&via=transform 512w"><img class="max-w-[50px]" src="/.11ty/image/?src=src%2Fimg%2Fsocial%2Ftwitter.png&width=512&format=jpeg&via=transform" alt="Twitter Icon" width="512" height="512"></picture>
			</a>
			<a href="https://github.com/notthetup" title="Chinmay on Github" target="_blank">
				<picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2Fsocial%2Fgithub.png&width=512&format=webp&via=transform 512w"><img class="max-w-[50px]" src="/.11ty/image/?src=src%2Fimg%2Fsocial%2Fgithub.png&width=512&format=jpeg&via=transform" alt="GitHub Icon" width="512" height="512"></picture>
			</a>
		</div>
	</h5></nav>
</footer>


</body>
</html>
