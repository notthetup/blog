<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Technology, Audio and other Geekery</title>
<meta name="description" content="">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chinpen.net/blog/img/site-logo.png">
<meta name="twitter:title" content="Technology, Audio and other Geekery">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@ntt">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Technology, Audio and other Geekery">
<meta property="og:description" content="">
<meta property="og:url" content="https://chinpen.net/blog/funky-waves.html">
<meta property="og:site_name" content="Technology, Audio and other Geekery">





<link rel="canonical" href="https://chinpen.net/blog/funky-waves.html">
<link href="https://chinpen.net/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Technology, Audio and other Geekery Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/styles/index.css">
<!-- Webfonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Volkhov:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" href="https://chinpen.net/blog/favicon.ico">
<link rel="shortcut icon" href="https://chinpen.net/blog/favicon.png">

</head>

<body id="post">

<div class="navbar bg-base-100 shadow-sm">
	<div class="navbar-start">
		<a class="text-xl">chinpen.net</a>
	</div>
	<div class="navbar-center hidden lg:flex">
		<ul class="menu menu-horizontal px-1">
			
			<li class="text-xl">
				
				<a href="https://chinpen.net">Home</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/blog/">Blog</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/about/">About</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/feed.xml">Feed</a>
				
			</li>
			
			<li class="text-xl">
				
				<a href="https://chinpen.net/blog/search">Search</a>
				
			</li>
			
		</ul>
	</div>
</div>

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title"></h1>
        
      </header>
      <footer class="entry-meta">
        <picture><source type="image/webp" srcset="/.11ty/image/?src=https%3A%2F%2Fchinpen.net%2Fblog%2Fimages%2Fchinpen.jpg&width=180&format=webp&via=transform 180w"><img src="/.11ty/image/?src=https%3A%2F%2Fchinpen.net%2Fblog%2Fimages%2Fchinpen.jpg&width=180&format=jpeg&via=transform" alt="Chinmay photo" class="author-photo" width="180" height="180"></picture>
        <span class="author vcard">By <span class="fn"><a href="https://chinpen.net/blog/about/" title="About Chinmay">Chinmay</a></span></span>
        <span class="entry-date date published"><time datetime="2009-11-26T08:00:00+08:00"><i class="icon-calendar-empty"></i> November 26, 2009</time></span>
        
        
        <span><a href="https://chinpen.net/blog/funky-waves.html" rel="bookmark" title=""><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <p>We were trying to animate a <em>mode</em> which we measured on a beam for one of the labs at school. Ofcourse, <a href="http://en.wikipedia.org/wiki/Matlab">Matlab</a> it was for all the data processing and animation. We used the '<a href="http://www.mathworks.com/help/techdoc/ref/patch.html">patch</a>' command to generate a surface with many elements and then moved them individually as per the measurements.</p>
<p>Now of course Matlab let's you save each plot as a bitmap and play them back as a movie, but then it's stuck in Matlab. So how do you render it to a 'standard' file? Well, there is <a href="http://www.mathworks.com/matlabcentral/fileexchange/309-mpgwrite">mpgwrite</a>. You can find it at <a href="http://www.mathworks.com/matlabcentral/index.html">Matlab Central</a> which is a really cool community where you can get tonnes of Matlab help and pre-written scripts and libraries which help you do lots of things.</p>
<p>Now, that's all cool, but mpgwrite uses a <a href="http://www.instructables.com/id/SEE8PONF8DOSUKF/">Matlab executable</a>(.mex) to do all the heavy lifting in C. So that mean I had to compile it myself. Not a problem I thought. With <a href="http://www.macports.org/">macports</a>, I should have all the things I need. So we '<a href="http://en.wikipedia.org/wiki/Make_%28software%29">make</a>'. But I had some errors. Looking at the forum for mpgwrite, I saw this solution.</p>
<blockquote>
<p>A few hints on how to compile would be nice. I see others have had the same problem, so I'll share how I managed to compile it under Mac OS X 10.4.8 running on an Intel Mac Pro.</p>
<ol>
<li>First, you must change file pbmplus.h, at line 101 change to</li>
</ol>
</blockquote>
<blockquote>
<p><em>#include &lt;malloc/malloc.h&gt;</em></p>
<p>Remember to put the number sign (i.e. the hash key on your phone) before the include statement.</p>
</blockquote>
<blockquote>
<ol start="2">
<li>
<p>Locate where you mex compiler is. In my case it is /Applications/MATLAB73/bin/mex. The full path must be written in the Makefile, i.e. it says simply &quot;mex&quot; on line 8, however it must be the full path to the mex compiler (as written above).</p>
</li>
<li>
<p>Type make at the command line (not in MatLab) - of course you must be in the src/ directory to do this.</p>
</li>
<li>
<p>Enjoy your .mex*-file!</p>
</li>
</ol>
<p>Hope this helps.</p>
</blockquote>
<p>And Voila! It compiled. So I continued to export the matlab animation and made an mpeg out of it.. Check it out.</p>
<iframe id="ytplayer" type="text/html" width="640" height="390" src="http://www.youtube.com/embed/R1hfdUpSXaU?&origin=http://chinpen.net" frameborder="0"></iframe>
<p>For those who are interested. This is a mixed mode with some part torsional and some part bending wave.</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<footer class="footer footer-center p-10 m-">
	<nav>
		<div class="bg-base-content/10 mx-1 mt-10 mb-5 w-full h-[var(--border)]"></div>
		<h5 class="font-[volkhov]"><em>&copy; 2025 Chinmay. Powered by <a href="https://www.eleventy.dev/" target="_blank">Eleventy</a></em>.
		<div class="grid grid-flow-col justify-center gap-4">
			<a href="https://twitter.com/ntt" title="Chinmay on Twitter" target="_blank">
				<picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2Fsocial%2Ftwitter.png&width=512&format=webp&via=transform 512w"><img class="max-w-[50px]" src="/.11ty/image/?src=src%2Fimg%2Fsocial%2Ftwitter.png&width=512&format=jpeg&via=transform" alt="Twitter Icon" width="512" height="512"></picture>
			</a>
			<a href="https://github.com/notthetup" title="Chinmay on Github" target="_blank">
				<picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fimg%2Fsocial%2Fgithub.png&width=512&format=webp&via=transform 512w"><img class="max-w-[50px]" src="/.11ty/image/?src=src%2Fimg%2Fsocial%2Fgithub.png&width=512&format=jpeg&via=transform" alt="GitHub Icon" width="512" height="512"></picture>
			</a>
		</div>
	</h5></nav>
</footer>


</body>
</html>
